# üì¶ Inventory Management System

Full-stack project built using **Express.js**, **Sequelize**, **PostgreSQL**, **Next.js (App Router)**, **TailwindCSS**, and **shadcn/ui**.

This system manages:

- Warehouses  
- Products  
- Stocks  
- Purchase Requests  
- Purchase Request Items  

---

## üöÄ How to Run the Project Locally

### Prerequisites

- **Node.js** (v18+ recommended)
- **PostgreSQL** (v14+)
- **npm** or **yarn**

---

## 1Ô∏è‚É£ Backend Setup (Express.js + Sequelize + PostgreSQL)

### Install PostgreSQL and Create Database
```sql
CREATE DATABASE foomlab_dev;
```

### Clone and Setup
```bash
# Clone the repository
git clone 
cd backend

# Install dependencies
npm install

# Copy environment variables
cp .env.example .env
# Edit .env with your PostgreSQL credentials
```

### Environment Variables (`.env`)
```env
PORT=8080
DB_HOST=localhost
DB_PORT=5432
DB_NAME=foomlab_dev
DB_USER=your_username
DB_PASSWORD=your_password
NODE_ENV=development
```

### Run Database Migrations
```bash
npx sequelize-cli db:migrate
```

### Start the Backend Server
```bash
npm run dev
```

The backend API will be available at **`http://localhost:8080`**

---

## 2Ô∏è‚É£ Frontend Setup (Next.js + TailwindCSS + shadcn/ui)
```bash
# Clone the repository (if not already done)
git clone 
cd frontend

# Install dependencies
npm install

# Create environment variables
touch .env.local
```

### Environment Variables (`.env.local`)
```env
NEXT_PUBLIC_BACKEND_URL=http://localhost:8080
```

### Start Development Server
```bash
npm run dev
```

The frontend will be available at **`http://localhost:3000`**

---

## üìÇ Project Structure

### Backend Structure
```
backend/
‚îÇ‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ models/        # Sequelize models (Warehouse, Product, Stock, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ migrations/    # Database migrations
‚îÇ   ‚îú‚îÄ‚îÄ services/      # Business logic & database queries
‚îÇ   ‚îú‚îÄ‚îÄ controllers/   # Handle requests, validations, responses
‚îÇ   ‚îú‚îÄ‚îÄ routes/        # API route definitions
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ warehouseRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ productRoutes.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ stockRoutes.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ purchaserequestRoutes.js
‚îÇ   ‚îî‚îÄ‚îÄ server.js      # Express app entry point (CORS, JSON parsing)
‚îÇ
‚îî‚îÄ‚îÄ .env.example       # Example environment variables
```

### Frontend Structure
```
frontend/
‚îÇ‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ page.tsx                    # Stock Dashboard (Home)
‚îÇ   ‚îú‚îÄ‚îÄ purchase-requests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.tsx               # Purchase Requests List
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ [id]/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ page.tsx           # Edit/View Purchase Request Detail
‚îÇ   ‚îî‚îÄ‚îÄ warehouses/
‚îÇ       ‚îî‚îÄ‚îÄ page.tsx               # Warehouses Management (to be implemented)
‚îÇ
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îî‚îÄ‚îÄ ui/                        # shadcn/ui components
‚îÇ
‚îú‚îÄ‚îÄ .env.local                     # Frontend environment variables
‚îî‚îÄ‚îÄ package.json
```

---

## üóÑÔ∏è Database Schema

The tables were created manually in PostgreSQL (not auto-generated by Sequelize). Sequelize ORM maps to these existing tables.

### SQL Schema
```sql
CREATE TABLE warehouse (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL
);

CREATE TABLE product (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    sku VARCHAR(50) NOT NULL UNIQUE
);

CREATE TABLE stock (
    warehouse_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL DEFAULT 0,
    PRIMARY KEY (warehouse_id, product_id),
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES product(id) ON DELETE CASCADE
);

CREATE TABLE purchase_request (
    id SERIAL PRIMARY KEY,
    reference VARCHAR(20) NOT NULL UNIQUE,
    warehouse_id INT NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'DRAFT',
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    FOREIGN KEY (warehouse_id) REFERENCES warehouse(id)
);

CREATE TABLE purchase_request_item (
    id SERIAL PRIMARY KEY,
    purchase_request_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL,
    FOREIGN KEY (purchase_request_id) REFERENCES purchase_request(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES product(id)
);
```

### Database Relations

**One-to-Many:**
- `PurchaseRequest` ‚Üí `PurchaseRequestItems`  
  A purchase request can contain multiple items.

**Many-to-Many (via composite key):**
- `Stock` = `(warehouse_id, product_id)`  
  Each stock record links a warehouse to a product with a quantity.

---

## üéØ API Endpoints

### Warehouses
- `GET /warehouses` - Get all warehouses
- `GET /warehouses/:id` - Get warehouse by ID
- `POST /warehouses` - Create new warehouse
- `PUT /warehouses/:id` - Update warehouse
- `DELETE /warehouses/:id` - Delete warehouse

### Products
- `GET /products` - Get all products
- `GET /products/:id` - Get product by ID
- `POST /products` - Create new product
- `PUT /products/:id` - Update product
- `DELETE /products/:id` - Delete product

### Stocks
- `GET /stocks` - Get all stock records
- `GET /stocks/:id` - Get stock by ID
- `POST /stocks` - Create new stock record
- `PUT /stocks/:id` - Update stock quantity
- `DELETE /stocks/:id` - Delete stock record

### Purchase Requests
- `GET /purchase/request` - Get all purchase requests
- `GET /purchase/request/:id` - Get purchase request by ID (includes items)
- `POST /purchase/request` - Create new purchase request with items
- `PUT /purchase/request/:id` - Update purchase request
- `DELETE /purchase/request/:id` - Delete purchase request

---

## üí° Design Decisions

### Backend Architecture

‚úÖ **Sequelize ORM** ‚Äî Maps to existing SQL tables (no auto-sync)  
‚úÖ **Manual SQL Schema** ‚Äî Tables created manually for better control  
‚úÖ **Layered Structure** ‚Äî Services ‚Üí Controllers ‚Üí Routes ‚Üí server.js  
‚úÖ **Service Layer** ‚Äî Keeps database queries clean and reusable  
‚úÖ **Controllers** ‚Äî Handle:
- Business logic
- Input validation
- Success/error responses
- HTTP status codes (200, 400, 500)

‚úÖ **Modular Routes** ‚Äî Separated by resource for clarity  
‚úÖ **CORS Enabled** ‚Äî Allows frontend-backend communication  
‚úÖ **JSON Parsing** ‚Äî Built-in Express middleware  

### Frontend Architecture

‚úÖ **Next.js App Router** ‚Äî Modern file-based routing with React Server Components  
‚úÖ **shadcn/ui** ‚Äî Consistent, accessible, modern component library  
‚úÖ **TailwindCSS** ‚Äî Fast styling workflow with utility classes  
‚úÖ **TypeScript** ‚Äî Type safety for better developer experience  
‚úÖ **Client Components** ‚Äî `'use client'` for interactive dashboards  
‚úÖ **Dynamic Routes** ‚Äî `/purchase-requests/[id]` for edit functionality  
‚úÖ **Real-time Data Enrichment** ‚Äî Fetches related warehouse & product names  

### Frontend Routing Structure
```
/                          # Stock Dashboard
/purchase-requests         # Purchase Requests List
/purchase-requests/new     # Create New Purchase Request
/purchase-requests/[id]    # Edit Purchase Request
/warehouses                # Warehouses Management (to be implemented)
```

### Core Logic

**Stock Management:**
- Color-coded quantities for visual assessment (Green >50, Yellow >20, Red ‚â§20)
- Real-time enrichment with warehouse and product names

**Purchase Request Management:**
- Multiple line items per request
- Status workflow: `DRAFT` ‚Üí `PENDING` ‚Üí `COMPLETED`
- Total quantity calculated from all items

---

## üöß Possible Improvements

### Backend
- Add **JWT authentication** for secure API access
- Add **role-based authorization** (Admin, Manager, Staff)
- Improve **input validation** (use express-validator)
- Add **audit logs** for tracking changes
- Create **API documentation** (Swagger/OpenAPI)

### Frontend
- Add **dark mode** for better accessibility
- Add **pagination** for larger datasets
- Add **advanced search and filtering**
- Implement **toast notifications** instead of alerts
- Add **confirmation dialogs** for destructive actions
- Improve **mobile responsiveness**
- Implement **export to CSV/Excel** functionality

### System Wide
- Add **Docker support** for containerization
- Add **CI/CD** for automated deployments
- Add **LLM** for intelligent chatbot (GPT-4, GPT-3.5)

## üêõ Troubleshooting

### Common Issues

**CORS Error:**
- Ensure CORS is properly configured in backend `server.js`
- Check `NEXT_PUBLIC_BACKEND_URL` in frontend `.env.local`

**Database Connection Error:**
- Verify PostgreSQL is running
- Check database credentials in backend `.env`
- Ensure database `foomlab_dev` exists

**API 404 Errors:**
- Verify backend is running on port 8080
- Check that all routes are properly registered in `server.js`

**Hydration Error (React):**
- Don't mix Material-UI and shadcn/ui components
- Ensure date formatting is consistent between server and client

**Module Not Found:**
- Run `npm install` in both backend and frontend directories
- Delete `node_modules` and reinstall if needed

---

## Note
- The vendor that is required to be displayed in the Purchase Request page isn't available, because of unclear instructions in the task description. The database scheme in the didn't specify the creation of the vendor column. However this is easily fixable by adding a vendor column to the purchase request table.
